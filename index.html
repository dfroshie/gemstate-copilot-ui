<script>
  const input = document.getElementById('input');
  const messages = document.getElementById('messages');

  input.addEventListener('keypress', async (e) => {
    if (e.key === 'Enter') {
      const userMsg = input.value.trim();
      if (!userMsg) return;

      input.value = '';
      messages.innerHTML += `<div class="msg user">🧑‍💼 You: ${userMsg}</div>`;

      try {
        const response = await fetch('https://gemstate-copilot-worker.david-froshiesar.workers.dev/', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: userMsg })
        });

        const data = await response.json();
        messages.innerHTML += `<div class="msg bot">🤖 GemState: ${data.reply}</div>`;
      } catch (err) {
        messages.innerHTML += `<div class="msg bot">⚠️ Error: ${err.message}</div>`;
      }
    }
  });
</script>
